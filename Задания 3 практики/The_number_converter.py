def roman_convert(s):
    """
    Конвертирует римские числа в арабские и наоборот.
    
    Если на входе арабское число (1-3999) -> возвращает римское число
    Если на входе римское число (i-mmmcmxcix) -> возвращает арабское число
    """
    
    # Словарь соответствия римских символов и их значений
    roman_map = {'i': 1, 'v': 5, 'x': 10, 'l': 50,'c': 100, 'd': 500, 'm': 1000}
    s = s.lower()  # Приводим к нижнему регистру для единообразия
    
    # ---- ЕСЛИ ВВЕДЕНО АРАБСКОЕ ЧИСЛО ----
    if s.isdigit():  # Проверяем, состоит ли строка только из цифр
        num = int(s)  # Преобразуем строку в число
        
        if 1 <= num <= 3999:  # Проверяем диапазон
            # Список пар (значение, римский символ) для преобразования
            val_map = [
                (1000,'M'), (900,'CM'), (500,'D'), (400,'CD'), 
                (100,'C'), (90,'XC'), (50,'L'), (40,'XL'), 
                (10,'X'), (9,'IX'), (5,'V'), (4,'IV'), (1,'I')
            ]
            
            roman = ""  # Сюда будем записывать результат
            
            # Проходим по всем парам от большего к меньшему
            for val, sym in val_map:
                while num >= val:  # Пока число содержит текущее значение
                    roman += sym   # Добавляем символ к результату
                    num -= val     # Уменьшаем число на это значение
            
            return roman  # Возвращаем римское число
        else:
            return "Число вне диапазона (1-4000)."
    
    # ---- ЕСЛИ ВВЕДЕНО РИМСКОЕ ЧИСЛО ----
    elif all(ch in 'ivxlcdm' for ch in s):  # Проверяем, что все символы - римские цифры
        total = 0   # Итоговое арабское число
        prev = 0    # Значение предыдущей цифры
        
        # Идем по римскому числу справа налево (с конца)
        for ch in reversed(s):
            val = roman_map[ch]  # Получаем значение текущей цифры
            
            # Правило вычитания: если текущая цифра меньше предыдущей, вычитаем
            # (например, IV = 5 - 1 = 4, IX = 10 - 1 = 9)
            if val < prev:
                total -= val
            else:
                total += val
                
            prev = val  # Запоминаем текущее значение для следующей итерации
        
        # Проверяем диапазон результата
        if 1 <= total <= 3999:
            return str(total)  # Возвращаем арабское число как строку
        else:
            return "Римское число вне диапазона (1-3999)."
    
    # ---- НЕВЕРНЫЙ ВВОД ----
    else:
        return "Неверный ввод."


# Получение данных от пользователя
text = input('Введите число для преобразования от 1 до 3999 (обычное) или от i до mmmcmxcix (римское)):\n')

# Вывод результата
print("Результат:", roman_convert(text))
